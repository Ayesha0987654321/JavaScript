<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01 Ajax - TEXT Files </title>
</head>
<body>
      <button id="button">Get Text Files</button>
        <br>
        <div id="text"></div>

      <script>
        // Create Event Listener
     document.getElementById('button').addEventListener('click' , loadText);
        function loadText(){
           //Create xhr object
           var xhr = new XMLHttpRequest();

        //    OPEN = type , url/file , async
            xhr.open('GET','simple1.txt',true);
        // onload just check 1 and 4 state
          console.log('Ready State ' , xhr.readyState);



          //optional - used for loaders
           xhr.onprogress = function(){
            console.log('Ready Sate :' , xhr.readyState); //ready state is 3  processing te request
           }

          xhr.onload=function(){
            console.log('Ready Sate ' , xhr.readyState);
            if(this.status == 200){
                //we are loging the response
                console.log(this.responseText);
                document.getElementById('text').innerHTML = this.responseText ;
            }else if(this.status == 404  ){
                    console.log(this.responseText);
                document.getElementById('text').innerHTML = 'Not Found';
            }
          }

           xhr.onerror  = function() {
             console.log('Request Error');
           }

        //in onreadystate change check all the four stages 
        // console.log('Ready Sate ' , xhr.readyState);
        // xhr.onreadystatechange = function(){
        //     console.log('ready state ' , xhr.readyState);
        //      if(this.readyState == 4  && this.status == 200){
        //         console.log(this.responseText);
        //      }
        // }
       
            //sends request 
           xhr.send();
        }
      </script>
       <!-- Ready State Values
       0 - request not initialized
       1 - server connection established
       2 - request recieved
       3 - Processing the request
       4 - request finished and response is ready -->


      <!-- //http status -->
       <!-- 200 - okay
       403 - forbidden 
       404 - page not found -->
    </body>
       
</html>